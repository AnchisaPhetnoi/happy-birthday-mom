<!DOCTYPE html> <html lang="th"> <head> <meta charset="UTF-8"> <title>ğŸ„ Catch the Gifts ğŸ</title> 
    <style> 
        body { margin: 0; font-family: Arial, sans-serif;
         background: linear-gradient(#1effda, #65b1ee,  #65eec0); 
         color: white; text-align: center; }
          .game-container { position: relative; width: 500px; margin: 20px auto; } 
          canvas { background: white; border-radius: 14px; position: relative;  z-index: 1;}
.overlay {
    position: absolute;
    inset: 0;
    display: flex;          /* ğŸ‘ˆ à¸‹à¹ˆà¸­à¸™à¸à¹ˆà¸­à¸™ */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 12px;
    z-index: 10;
    background: rgba(0,0,0,0.2);
    backdrop-filter: blur(4px);
    pointer-events: auto;
    
 } 

button { padding: 12px 28px; font-size: 20px; 
         border-radius: 14px; border: none; cursor: pointer;
         background: red; color: white; } 
#restartBtn { display: none; } 
#gameOverText,
#finalScore {
    display: none;
}
#gameOverText {
    font-size: 42px;
    color: #ff3b3b;
    text-shadow: 2px 2px 6px rgba(0,0,0,0.3);
}
#finalScore {
    font-size: 20px;
    margin-top: 0.1px;
    margin-bottom: 40px;   /* ğŸ‘ˆ à¹€à¸à¸´à¹ˆà¸¡à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸­à¸µà¸ */
    text-align: center;
}
#soundToggle {
    margin: 10px auto;
    background: #0a73e3;
    border-radius: 20px;
    font-size: 16px;
    padding: 8px 18px;
}

</style> 
</head>
 <body>
     <h1>ğŸ„ Catch the Gifts ğŸ</h1> 
     <p>à¸„à¸°à¹à¸™à¸™: 
        <span id="score">0</span> | â¤ï¸ à¸Šà¸µà¸§à¸´à¸•: 
        <span id="life">3</span>  
       <br>
        <button id="soundToggle">ğŸ”Š à¹€à¸ªà¸µà¸¢à¸‡: à¹€à¸›à¸´à¸”</button>
    </p> 
    <div class="game-container">
         <canvas id="game" width="450" height="550"></canvas>
          <div class="overlay" >
            <h2 id="gameOverText">Game Over</h2>
               <p id="finalScore"></p>
             <button id="startBtn">â–¶ à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸à¸¡</button>
    <div>
    <button id="restartBtn">ğŸ” à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆ</button> </div> 
   

</div> 
<audio id="soundCatch" src="audio/falling-259680.mp3"></audio> 
<audio id="soundMiss" src="audio/fast-body-fall-impact-352725.mp3"></audio>
<audio id="soundSpecial" src="audio/falling-259680.mp3"></audio>
<audio id="soundBackground" src="audio/christmas-jazz-christmas-holiday-347485.mp3"></audio>


<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const startBtn = document.getElementById('startBtn');
const restartBtn = document.getElementById('restartBtn');

const soundCatch = document.getElementById('soundCatch');
const soundMiss = document.getElementById('soundMiss');
const soundSpecial = document.getElementById('soundSpecial');

const scoreEl = document.getElementById('score');
const lifeEl = document.getElementById('life');
const soundBackground = document.getElementById('soundBackground');
soundBackground.loop = true;
soundBackground.volume = 0.4; // à¸›à¸£à¸±à¸šà¹€à¸šà¸²-à¸”à¸±à¸‡à¹„à¸”à¹‰

let soundOn = true;

const soundToggle = document.getElementById('soundToggle');

soundToggle.addEventListener('click', () => {
    soundOn = !soundOn;

    if (soundOn) {
        soundBackground.play();
        soundToggle.textContent = 'ğŸ”Š à¹€à¸ªà¸µà¸¢à¸‡: à¹€à¸›à¸´à¸”';
    } else {
        soundBackground.pause();
        soundToggle.textContent = 'ğŸ”‡ à¹€à¸ªà¸µà¸¢à¸‡: à¸›à¸´à¸”';
    }
});
function fadeInSound(audio, targetVolume = 0.4, duration = 2000) {
    audio.volume = 0;
    audio.play();

    const step = targetVolume / (duration / 50);

    const fade = setInterval(() => {
        if (audio.volume < targetVolume) {
            audio.volume = Math.min(audio.volume + step, targetVolume);
        } else {
            clearInterval(fade);
        }
    }, 50);
}

// ğŸ à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¸­à¸‡à¸‚à¸§à¸±à¸
const giftTypes = [
    { emoji: 'ğŸ', score: 1, special: false },
    { emoji: 'ğŸ§¦', score: 1, special: false },
    { emoji: 'ğŸª', score: 1, special: false },
    { emoji: 'ğŸ„', score: 2, special: false },
    { emoji: 'ğŸ…ğŸ»', score: 5, special: true },
    { emoji: 'â›„', score: 3, special: true }
];

// à¸•à¸°à¸à¸£à¹‰à¸²
let basketX = 160;
const basketWidth = 80;
const basketHeight = 20;
const basketY = canvas.height - 50;

// à¹€à¸à¸¡
let gifts = [];
let score = 0;
let life = 3;
let gameStarted = false;
let gameOver = false;
let baseSpeed = 3;

// à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸à¸¡
function startGame() {
    gifts = [];
    score = 0;
    life = 3;
    gameStarted = true;
    gameOver = false;
    basketX = 160;

    scoreEl.textContent = score;
    lifeEl.textContent = life;

    startBtn.style.display = 'none';
    restartBtn.style.display = 'none';

    document.querySelector('.overlay').style.display = 'none';
    document.getElementById('gameOverText').style.display = 'none';
    document.getElementById('finalScore').style.display = 'none';

    soundBackground.currentTime = 0;
    soundBackground.play();

    update();
}



// à¸„à¸§à¸šà¸„à¸¸à¸¡à¸•à¸°à¸à¸£à¹‰à¸²
canvas.addEventListener('mousemove', e => {
    if (!gameStarted) return;
    const rect = canvas.getBoundingClientRect();
    basketX = e.clientX - rect.left - basketWidth / 2;
});

// à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¸­à¸‡à¸‚à¸§à¸±à¸
function createGift() {
    if (!gameStarted || gameOver) return;

    const gift = giftTypes[Math.floor(Math.random() * giftTypes.length)];

    gifts.push({
        x: Math.random() * (canvas.width - 30),
        y: 0,
        emoji: gift.emoji,
        score: gift.score,
        special: gift.special
    });
}

// GAME OVER
function showGameOver() {
   gameStarted = false;
    gameOver = true;

    const overlay = document.querySelector('.overlay');

    overlay.style.display = 'flex';        // ğŸ‘ˆ à¹€à¸›à¸´à¸” overlay
    document.getElementById('gameOverText').style.display = 'block';
    document.getElementById('finalScore').style.display = 'block';
    document.getElementById('finalScore').textContent = 'à¸„à¸°à¹à¸™à¸™: ' + score;

    restartBtn.style.display = 'inline-block';
}


// à¸§à¸²à¸”à¹€à¸à¸¡
function update() {
    if (!gameStarted) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // à¸•à¸°à¸à¸£à¹‰à¸²
    ctx.fillStyle = '#8B4513';
    ctx.fillRect(basketX, basketY, basketWidth, basketHeight);

    gifts = gifts.filter(g => {
        g.y += baseSpeed;

        ctx.font = '28px Arial';
        ctx.fillText(g.emoji, g.x, g.y);

        // âœ… à¸£à¸±à¸šà¸‚à¸­à¸‡à¸‚à¸§à¸±à¸
       if (g.y > basketY - 10 && g.x > basketX && g.x < basketX + basketWidth) {
    score += g.score;
    scoreEl.textContent = score;

    if (g.special) {
        soundSpecial.currentTime = 0;
        soundSpecial.play();
    } else {
        soundCatch.currentTime = 0;
        soundCatch.play();
    }

    return false;
}
        // âŒ à¸à¸¥à¸²à¸”
       if (g.y > canvas.height) {
            life--;
            lifeEl.textContent = life;
            soundMiss.play();

            if (life <= 0) gameOver = true;
            return false;
        }

        return true;
    });

    if (gameOver) {
        showGameOver();
        return;
    }

    requestAnimationFrame(update);
}

startBtn.addEventListener('click', startGame);
function restartGame() {
    startGame();
   
}

 restartBtn.addEventListener('click', restartGame);

setInterval(createGift, 900);
</script>
</body> </html>